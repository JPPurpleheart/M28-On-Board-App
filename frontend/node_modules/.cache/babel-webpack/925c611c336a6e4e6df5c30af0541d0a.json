{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/login/apiconnections.service\";\nimport * as i2 from \"src/app/core/services/login/token-handler.service\";\nimport * as i3 from \"src/app/core/services/login/auth-handler.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction LoginComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"div\", 3);\n    i0.ɵɵtext(4, \"Inicia Sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 4);\n    i0.ɵɵelementStart(6, \"form\", 5, 6);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_0_Template_form_ngSubmit_6_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.submitLogin();\n    });\n    i0.ɵɵelementStart(8, \"div\", 7);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 8);\n    i0.ɵɵelementStart(11, \"label\", 9);\n    i0.ɵɵtext(12, \"Correo Electr\\u00F3nico\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_0_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.form.email = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 8);\n    i0.ɵɵelementStart(15, \"label\", 11);\n    i0.ɵɵtext(16, \"Contrase\\u00F1a\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_0_Template_input_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.form.password = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 13);\n    i0.ɵɵtext(19, \"Inicia Sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r1 = i0.ɵɵreference(7);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"hidden\", !ctx_r0.error);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.password);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !_r1.valid);\n  }\n}\n\nexport class LoginComponent {\n  constructor(apiconnections, tokenhandler, authhandler, router) {\n    this.apiconnections = apiconnections;\n    this.tokenhandler = tokenhandler;\n    this.authhandler = authhandler;\n    this.router = router;\n    this.form = {\n      email: null,\n      password: null\n    };\n    this.error = null;\n  }\n\n  ngOnInit() {}\n\n  submitLogin() {\n    return this.apiconnections.login(this.form).subscribe(data => this.handleResponse(data), error => this.handleError(error));\n  }\n\n  handleResponse(data) {\n    this.tokenhandler.handle(data.access_token);\n    this.authhandler.changeAuthStatus(true);\n    this.router.navigateByUrl('/profile');\n  }\n\n  handleError(error) {\n    this.error = error.error.error;\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.APIConnectionsService), i0.ɵɵdirectiveInject(i2.TokenHandlerService), i0.ɵɵdirectiveInject(i3.AuthHandlerService), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [1, \"col-8\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"alert\", \"alert-danger\", 3, \"hidden\"], [1, \"mb-3\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, LoginComponent_div_0_Template, 20, 5, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(1, 1, ctx.authHandler.authStatus));\n    }\n  },\n  directives: [i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i6.DefaultValueAccessor, i6.RequiredValidator, i6.NgControlStatus, i6.NgModel],\n  pipes: [i5.AsyncPipe],\n  styles: [\".ng-invalid[_ngcontent-%COMP%]:not(form){\\n    border-left: 5px solid red;\\n}\\n\\n.ng-valid[_ngcontent-%COMP%]:not(form){\\n    border-left: 5px solid green;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSwwQkFBMEI7QUFDOUI7O0FBRUE7SUFDSSw0QkFBNEI7QUFDaEMiLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uZy1pbnZhbGlkOm5vdChmb3JtKXtcbiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkIHJlZDtcbn1cblxuLm5nLXZhbGlkOm5vdChmb3JtKXtcbiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkIGdyZWVuO1xufSJdfQ== */\"]\n});","map":{"version":3,"sources":["/var/www/html/m28onboard-app/frontend/src/app/public/login/login.component.ts","/var/www/html/m28onboard-app/frontend/src/app/public/login/login.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { APIConnectionsService } from 'src/app/core/services/login/apiconnections.service';\nimport { TokenHandlerService } from 'src/app/core/services/login/token-handler.service';\nimport { AuthHandlerService } from 'src/app/core/services/login/auth-handler.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  public form = {\n    email: null,\n    password: null\n  }\n\n  constructor(public apiconnections: APIConnectionsService, public tokenhandler: TokenHandlerService, public authhandler: AuthHandlerService, public router: Router) { }\n\n  ngOnInit(): void {\n  }\n\n  public error = null;\n\n  submitLogin() {\n    return this.apiconnections.login(this.form).subscribe(\n      data => this.handleResponse(data),\n      error => this.handleError(error)\n    );\n  }\n\n  handleResponse(data: any) {\n    this.tokenhandler.handle(data.access_token);\n    this.authhandler.changeAuthStatus(true);\n    this.router.navigateByUrl('/profile');\n  }\n\n  handleError(error: any) {\n    this.error = error.error.error;\n  }\n\n}\n","<div *ngIf=\"!(authHandler.authStatus | async)\">\n  <div class=\"col-8\">\n      <div class=\"card\">\n          <div class=\"card-header\">Inicia Sesión</div>\n          <div class=\"card-body\">\n              <form #loginForm=\"ngForm\" (ngSubmit)=\"submitLogin()\">\n                  <div class=\"alert alert-danger\" [hidden]=\"!error\">\n                    {{error}}\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"email\" class=\"form-label\">Correo Electrónico</label>\n                    <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" [(ngModel)]=\"form.email\" required>\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"password\" class=\"form-label\">Contraseña</label>\n                    <input type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" [(ngModel)]=\"form.password\" required>\n                  </div>\n                  <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"!loginForm.valid\">Inicia Sesión</button>\n              </form>\n          </div>\n      </div>\n  </div>\n</div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}